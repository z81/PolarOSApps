(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};window.PixiAdapter=(function(){b.prototype.render=function(){this.renderer.render(this.stage);return requestAnimationFrame(this.render)};function b(e,d,c){var f;if(e==null){e="#scheme"}if(d==null){d=true}if(c==null){c="0"}this.drawLink=a(this.drawLink,this);this.render=a(this.render,this);f="scheme"+c;this.renderer=new PIXI.WebGLRenderer(1000,600,null,true,true);$(this.renderer.view).attr("id",f);$(e).append(this.renderer.view);if(!d){$("#"+f).hide()}this.stage=new PIXI.Stage(16777215,true);this.stage.mouseup=function(g){return Scheme.mouseup(g)};requestAnimationFrame(this.render);this.stage}b.getRealDotPosition=function(c){return[c.currentPath.points[0]+c.worldTransform.tx,c.currentPath.points[1]+c.worldTransform.ty]};b.moveElement=function(d,c,e){return d._.visual.position={x:c,y:e}};b.prototype.drawElement=function(g,j,c){var e,i,d,f,h;i=getConf().element.color;d=getConf().element.selected.color;e=getConf().element.border.color;h=new PIXI.Graphics();h.beginFill(i);h.lineStyle(getConf().element.border.size,e);h.drawRect(g.X,g.Y,j,j);h.hitArea=new PIXI.Rectangle(g.X,g.Y,j,j);h.setInteractive(true);h.mousedown=function(l){var k;if(h.last_click_time+200>Date.now()){Scheme.elementDblclick(l,g);return false}h.last_click_time=Date.now();if(Scheme.selected_element){Scheme.selected_element._.visual.tint=i}h.tint=d;Scheme.selectElement(g);k=g._.visual.position;Scheme.drag_start_pos=[l.originalEvent.layerX-k.x,l.originalEvent.layerY-k.y];return Scheme.mousedown(l,g)};h.mouseup=function(k){return Scheme.mouseup(k,g)};h.mousemove=function(k){return Scheme.mousemove(k,g)};this.stage.addChild(h);if(c>0){f=new PIXI.Sprite(PIXI.Texture.fromImage(""+(getConf().icon.path)+g.Name+".ico"));f.position.x=g.X+(j-c)/2;f.position.y=g.Y+(j-c)/2;f.height=c;f.width=c;h.addChild(f)}return h};b.prototype.drawDot=function(d,f,e,j){var c,k,h,i,g;i=e[0],g=e[1];k=getConf().dot.hover_color;c=new PIXI.Graphics();h=function(){c.beginFill(j);c.drawCircle(i,g,getConf().dot.radius.min);c.hitArea=new PIXI.Circle(i,g,getConf().dot.radius.min);return c.setInteractive(true)};h();c.mouseover=function(){console.log(d.Name);c.beginFill(k);return c.drawCircle(i,g,getConf().dot.radius.max)};c.mouseout=function(){c.clear();return h()};c.mouseup=function(l){return Scheme.newLink(l,d)};d._.element._.visual.addChild(c);return c};b.prototype.drawLink=function(k,j,f,q){var l,h,m,r,p,o,d,c,g,n;if(q==null){q=false}p=k[0],o=k[1];d=j[0],c=j[1];if(q!==false){m=q}else{m=new PIXI.Graphics()}m.lineStyle(1,f);m.moveTo(p,o);r=Scheme.newPath(p,o,d,c,f);for(h=g=0,n=r.length;g<n;h=g+=2){l=r[h];m.lineTo(r[h],r[h+1])}m.lineTo(d,c);if(q===false){this.stage.addChild(m)}return m};return b})()}).call(this);